defmodule CLITest do
  use ExUnit.Case
  import ExUnit.CaptureIO

  # credits to this website for the ASCII table: http://www.tablesgenerator.com/text_tables

  @empty_grid """
  ╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╗
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╚═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╝
  """

  @grid_with_glider """
  ╔═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╦═══╗
  ║   ║   ║   ║ █ ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║ █ ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║ █ ║ █ ║ █ ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╠═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╬═══╣
  ║   ║   ║   ║   ║   ║   ║   ║   ║   ║   ║
  ╚═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╩═══╝
  """

  test "prints an empty 10x10 grid" do
    assert @empty_grid ==
      capture_io(fn ->
        assert :ok == Life.CLI.main([])
      end)
  end

  test "prints a 10x10 grid with a glider" do
    grid = [{3, 0}, {4, 1}, {2, 2}, {3, 2}, {4, 2}]

    assert @grid_with_glider ==
      capture_io(fn ->
        assert :ok == Life.CLI.print(grid)
      end)
  end
end
